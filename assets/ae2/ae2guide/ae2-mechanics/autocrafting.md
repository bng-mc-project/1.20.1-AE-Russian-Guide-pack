---
navigation:
  parent: ae2-mechanics/ae2-mechanics-index.md
  title: Автокрафт
  icon: pattern_provider
---

# Автокрафт

### Главная особенность

<GameScene zoom="4" interactive={true}>
  <ImportStructure src="../assets/assemblies/autocraft_setup_greebles.snbt" />
  <IsometricCamera yaw="195" pitch="30" />
</GameScene>

Автокрафт — одна из основных функций AE2. Вместо того чтобы вручную создавать нужное количество каждого ингредиента и трудиться, как какой-то *плебей*, вы можете поручить это своей ME-системе. Или автоматически создавать предметы и экспортировать их куда-либо. Или автоматически поддерживать определённое количество предметов на складе с помощью хитрых механизмов. Это также работает с жидкостями и, если у вас есть определённые аддоны для дополнительных типов материалов, например, газы из Mekanism, то и с ними. Это действительно здорово.

Тема довольно сложная, так что приготовьтесь, и поехали.

Автокрафт состоит из трёх компонентов:
- Источник запроса на крафт
- Крафтовый CPU
- <ItemLink id="pattern_provider" />.

Вот как это работает:

1. Что-то создаёт запрос на крафт. Это может быть вы, кликающий в терминале на предмет, который можно создать автоматически, или экспортный шин/интерфейс с картой крафта, запрашивающий один из предметов, которые они настроены экспортировать/хранить.

*   (**ВАЖНО:** используйте кнопку "pick block" (обычно средняя кнопка мыши), чтобы запросить крафт предмета, который уже есть в системе — это может конфликтовать с модами для сортировки инвентаря).

2. ME-система вычисляет необходимые ингредиенты и шаги для выполнения запроса, сохраняя их в выбранном крафтовом CPU.

3. <ItemLink id="pattern_provider" /> с соответствующим [шаблоном](../items-blocks-machines/patterns.md) отправляет указанные в шаблоне ингредиенты в соседние инвентари. В случае рецепта верстака ("шаблон крафта") это будет <ItemLink id="molecular_assembler" />. В случае неверстачного рецепта ("шаблон обработки") это может быть другой блок, машина или сложная настройка с использованием редстоуна.

4. Результат крафта возвращается в систему каким-либо способом: через импортный шин, интерфейс или отправку результата обратно в pattern provider. **Важно, чтобы произошло событие "предмет попал в систему" — нельзя просто передать результат в сундук с <ItemLink id="storage_bus" />.**

5. Если этот крафт является промежуточным шагом для другого крафта в запросе, предметы сохраняются в крафтовом CPU и затем используются в следующем шаге.

# Шаблоны

<ItemImage id="crafting_pattern" scale="4" />

Шаблоны создаются в <ItemLink id="pattern_encoding_terminal" /> из пустых шаблонов.

Существует несколько типов шаблонов для разных целей:

*   <ItemLink id="crafting_pattern" /> кодируют рецепты верстака. Их можно поместить непосредственно в <ItemLink id="molecular_assembler" />, чтобы он создавал результат при получении ингредиентов, но основное их применение — в <ItemLink id="pattern_provider" /> рядом с молекулярным ассемблером. В этом случае pattern provider имеет особое поведение и отправляет соответствующий шаблон вместе с ингредиентами в соседние ассемблеры. Поскольку ассемблеры автоматически выбрасывают результаты крафта в соседние инвентари, для автоматизации шаблонов крафта достаточно ассемблера рядом с pattern provider.

***

*   <ItemLink id="smithing_table_pattern" /> очень похожи на шаблоны крафта, но кодируют рецепты кузнечного стола. Они также автоматизируются с помощью pattern provider и молекулярного ассемблера и работают аналогично. Более того, шаблоны крафта, кузнечные и камнерезные шаблоны могут использоваться в одной настройке.

***

*   <ItemLink id="stonecutting_pattern" /> очень похожи на шаблоны крафта, но кодируют рецепты камнереза. Они также автоматизируются с помощью pattern provider и молекулярного ассемблера и работают аналогично. Более того, шаблоны крафта, кузнечные и камнерезные шаблоны могут использоваться в одной настройке.

***

*   <ItemLink id="processing_pattern" /> — это то, где проявляется гибкость автокрафта. Они наиболее универсальны и просто говорят: "если pattern provider отправит эти ингредиенты в соседние инвентари, ME-система получит эти предметы в ближайшем или отдалённом будущем". С их помощью можно автоматизировать крафт почти для любых модифицированных машин, печей и подобного. Поскольку они настолько универсальны и не заботятся о том, что происходит между отправкой ингредиентов и получением результата, можно делать очень странные вещи, например, отправлять ингредиенты в целую производственную цепочку, которая будет сортировать предметы, брать другие ингредиенты из бесконечных ферм, печатать весь сценарий "Би Муви" — ME-системе всё равно, пока она получает указанный в шаблоне результат. Более того, ей даже не важно, связаны ли ингредиенты с результатом. Можно сказать "1 доска вишнёвого дерева = 1 звезда Нижнего мира" и настроить ферму визеров так, чтобы она убивала визера при получении доски вишнёвого дерева — и это сработает.

Несколько <ItemLink id="pattern_provider" /> с одинаковыми шаблонами поддерживаются и работают параллельно. Кроме того, можно создать шаблон, например, "8 булыжника = 8 камня" вместо "1 булыжник = 1 камень", и pattern provider будет вставлять 8 булыжников в вашу плавильную установку за одну операцию, а не по одному.

## Самая общая форма "шаблона"

Существует ещё более "универсальная" форма "шаблона", чем шаблон обработки. <ItemLink id="level_emitter" /> с картой крафта можно настроить так, чтобы он испускал редстоун-сигнал для создания предмета. Этот "шаблон" не определяет и даже не учитывает ингредиенты. Всё, что он говорит: "Если вы испускаете редстоун из этого level emitter, ME-система получит этот предмет в ближайшем или отдалённом будущем". Обычно это используется для активации и деактивации бесконечных ферм, которым не нужны входные ингредиенты, или для управления системами, обрабатывающими рекурсивные рецепты (которые стандартный автокрафт не понимает), например, "1 булыжник = 2 булыжника", если у вас есть машина, дублирующая булыжник.

# Крафтовый CPU

<GameScene zoom="4" background="transparent">
  <ImportStructure src="../assets/assemblies/crafting_cpus.snbt" />
  <IsometricCamera yaw="195" pitch="30" />
</GameScene>

Крафтовые CPU управляют запросами/заданиями на крафт. Они хранят промежуточные ингредиенты, пока выполняются задания с несколькими шагами, и влияют на то, насколько большими могут быть задания и, в некоторой степени, на скорость их выполнения. Это мультиблоки, которые должны быть прямоугольными призмами с как минимум 1 крафтовым хранилищем.

Крафтовые CPU состоят из:

*   (Обязательно) [Крафтовые хранилища](../items-blocks-machines/crafting_cpu_multiblock.md), доступные во всех стандартных размерах ячеек (1k, 4k, 16k, 64k, 256k). Они хранят ингредиенты и промежуточные ингредиенты, участвующие в крафте, поэтому для обработки заданий с большим количеством ингредиентов требуются более крупные или дополнительные хранилища.
*   (Опционально) <ItemLink id="crafting_accelerator" /> — они заставляют систему отправлять больше партий ингредиентов из pattern provider. Это позволяет, например, pattern provider, окружённому 6 молекулярными ассемблерами, отправлять ингредиенты (и таким образом использовать) все 6 одновременно, а не по одному.
*   (Опционально) <ItemLink id="crafting_monitor" /> — они отображают задание, которое CPU обрабатывает в данный момент. Их можно окрасить с помощью <ItemLink id="color_applicator" />.
*   (Опционально) <ItemLink id="crafting_unit" /> — они просто заполняют пространство, чтобы CPU был прямоугольной призмой.

Каждый крафтовый CPU обрабатывает 1 запрос или задание, поэтому если вы хотите одновременно запросить и процессор, и 256 гладкого камня, вам понадобятся 2 мультиблока CPU.

Их можно настроить для обработки запросов от игроков, автоматизации (экспортных шин и интерфейсов) или обоих.

# Pattern Providers

<Row>
<BlockImage id="pattern_provider" scale="4" />

<BlockImage id="pattern_provider" p:push_direction="up" scale="4" />

<GameScene zoom="4" background="transparent">
  <ImportStructure src="../assets/blocks/cable_pattern_provider.snbt" />
</GameScene>
</Row>

<ItemLink id="pattern_provider" /> — это основной способ взаимодействия вашей системы автокрафта с миром. Они отправляют ингредиенты из своих [шаблонов](../items-blocks-machines/patterns.md) в соседние инвентари, а предметы можно вставлять в них, чтобы добавить их в сеть. Часто можно сэкономить канал, передавая результат работы машины обратно в nearby pattern provider (часто тот, который отправил ингредиенты), вместо использования <ItemLink id="import_bus" /> для извлечения результата из машины в сеть.

Важно отметить, что поскольку они отправляют ингредиенты напрямую из [крафтового хранилища](../items-blocks-machines/crafting_cpu_multiblock.md#crafting-storage) в крафтовом CPU, они никогда не содержат ингредиенты в своём инвентаре, поэтому нельзя извлекать предметы из них. Нужно, чтобы provider отправил предметы в другой инвентарь (например, бочку), а затем извлекать их оттуда.

Также важно, что provider должен отправить ВСЕ ингредиенты сразу, он не может отправить половину партии. Это можно использовать.

Pattern providers имеют особое взаимодействие с интерфейсами в [подсетях](../ae2-mechanics/subnetworks.md): если интерфейс не изменён (ничего в слотах запроса), provider пропустит интерфейс и отправит предметы напрямую в [хранилище](../ae2-mechanics/import-export-storage.md) подсети, минуя интерфейс и не заполняя его партиями рецептов, и, что более важно, не отправляя следующую партию, пока в хранилище есть место.

Несколько pattern provider с одинаковыми шаблонами поддерживаются и работают параллельно.

Pattern providers пытаются распределять свои партии по всем своим сторонам, таким образом используя все подключённые машины параллельно.

## Варианты

Pattern Providers бывают трёх типов: обычный, направленный и плоский. Это влияет на то, на какие стороны они отправляют ингредиенты, принимают предметы и предоставляют сетевое подключение.

*   Обычные pattern providers отправляют ингредиенты на все стороны, принимают предметы со всех сторон и, как большинство машин AE2, действуют как кабель, предоставляя сетевое подключение на все стороны.

*   Направленные pattern providers создаются с помощью <ItemLink id="certus_quartz_wrench" /> на обычном pattern provider для изменения его направления. Они отправляют ингредиенты только на выбранную сторону, принимают предметы со всех сторон и специально не предоставляют сетевое подключение на выбранной стороне. Это позволяет им отправлять предметы в машины AE2 без подключения сетей, если вы хотите создать подсеть.

*   Плоские pattern providers являются [подчастями кабеля](../ae2-mechanics/cable-subparts.md), поэтому несколько можно разместить на одном кабеле, что позволяет создавать компактные настройки. Они ведут себя аналогично выбранной стороне направленного pattern provider: предоставляют шаблоны, принимают предметы и не предоставляют сетевое подключение на своей стороне.

Pattern providers можно преобразовывать между обычным и плоским в сетке крафта.

## Настройки

Pattern providers имеют несколько режимов:

*   **Блокирующий режим** останавливает отправку новой партии ингредиентов, если в машине уже есть ингредиенты.
*   **Блокировка крафта** может заблокировать provider при различных условиях редстоуна или до тех пор, пока результат предыдущего крафта не будет вставлен в этот конкретный pattern provider.
*   Provider можно показать или скрыть в <ItemLink id="pattern_access_terminal" />.

## Приоритет

Приоритеты можно установить, нажав на гаечный ключ в правом верхнем углу GUI. В случае нескольких [шаблонов](../items-blocks-machines/patterns.md) для одного и того же предмета, шаблоны в provider с более высоким приоритетом будут использоваться вместо шаблонов в provider с более низким приоритетом, если только в сети нет ингредиентов для шаблона с высоким приоритетом.

# Молекулярные ассемблеры

<BlockImage id="molecular_assembler" scale="4" />

<ItemLink id="molecular_assembler" /> принимает предметы, вставленные в него, и выполняет операцию, определённую соседним <ItemLink id="pattern_provider" />, или вставленным <ItemLink id="crafting_pattern" />, <ItemLink id="smithing_table_pattern" />, или <ItemLink id="stonecutting_pattern" />, а затем отправляет результат в соседние инвентари.

Их основное применение — рядом с <ItemLink id="pattern_provider" />. В этом случае pattern providers имеют особое поведение и отправляют информацию о соответствующем шаблоне вместе с ингредиентами в соседние ассемблеры. Поскольку ассемблеры автоматически выбрасывают результаты крафта в соседние инвентари (и, следовательно, в возвратные слоты pattern provider), для автоматизации шаблонов крафта достаточно ассемблера рядом с pattern provider.

<GameScene zoom="4" background="transparent">
<ImportStructure src="../assets/assemblies/assembler_tower.snbt" />
<IsometricCamera yaw="195" pitch="30" />
</GameScene>